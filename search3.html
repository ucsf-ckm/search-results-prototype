<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Search Results Prototype</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/tweaks3.css" />
    <script src="js/vendor/modernizr.js"></script>
  </head>
  <body>
    <div class="row">
      <div class="large-12 columns">
        <img src="img/top.png">
      </div>
    </div>
    
    <div class="row">
    <div class="large-4 columns">
      <div class="panel radius">
        <p><strong>Database list</strong></p>
        <div class="results-list" id="dbs">
          <progress>Loading&hellip;</progress>
        </div>        			
      </div>
    </div>
    
    <div class="large-4 columns">
      <div class="panel radius">
         <p><strong>Journals list</strong></p>
          <div class="results-list" id="sfx">
            <progress>Loading&hellip;</progress>
          </div>        			
      	</div>
    </div>
    
    <div class="large-4 columns">
      <div class="panel radius">
          <p><strong>Books and Journals</strong></p>
          <div class="results-list" id="millennium">
            <progress>Loading&hellip;</progress>
          </div>
      	</div>
    </div>
    </div>
     	
  <div class="row">
    <div class="large-4 columns">
      <div class="panel radius">
        <p><strong>PubMed</strong></p>
        <div class="results-list" id="pubmed">
          <progress>Loading&hellip;</progress>
        </div>       			
      </div>
    </div>
    
    <div class="large-4 columns">
      <div class="panel radius">
        <p><strong>Guides</strong></p>
        <div class="results-list" id="libguides">
          <progress>Loading&hellip;</progress>
        </div>       			
      </div>
    </div>
    
    <div class="large-4 columns">
      <div class="panel radius">
       <p><strong>Library Info</strong></p>
       <div class="results-list" id="drupal6">
          <progress>Loading&hellip;</progress>
        </div>       			
      </div>
    </div>
  </div>
      	
</div>
</div>
    
     <div class="row">
      <div class="large-12 columns">
        <img src="img/footer.png">
      </div>
    </div>

    
    <script src="js/vendor/jquery.js"></script>
    <script src="js/foundation.min.js"></script>
    <script>
      $(document).foundation();
    </script>
    <script src="https://apis.ucsf.edu/jsapi?library"></script>
    <script>
      var success = function (results) {
        var elem = document.getElementById(results.name);
        if (elem) {
          elem.innerHTML = '';
          var ol = document.createElement('ol');
          var li;
          var a;
          var text;

          var l = results.data.length;
          if (l) {
            for (var i=0; i<l; i++) {
              if (results.data[i].url.match(/^(https?:)?\/\/[\w:\/\?&%=\.\-~]+$/)) {
                li = document.createElement('li');
                a = document.createElement('a');
                a.setAttribute('href', results.data[i].url);
                if (a.hasOwnProperty('textContent')) {
                  a.textContent = results.data[i].name;
                } else {
                  a.innerText = results.data[i].name;
                }
                li.appendChild(a);
                ol.appendChild(li);
              } else {
                if (console) {
                  console.log('Bad URL: ' + results.data[i].url);
                }
              } 
            }
            elem.appendChild(ol);
          } else {
            elem.innerHTML = 'No results found.'
          }
        }
      };

      var failure = function (error) {
        if (console && error.message) {
          console.log(error.message);
        }
      };
      UCSF.Library.search({q: 'medicine', async: true}, success, failure);
    </script>
  </body>
</html>
